{"level":"info","timestamp":"2026-02-17T15:19:09.334+0800","caller":"backend/main.go:35","msg":"Application starting","mode":"debug","port":":8080"}
{"level":"info","timestamp":"2026-02-17T15:19:09.346+0800","caller":"backend/main.go:55","msg":"Server starting","port":":8080"}
{"level":"info","timestamp":"2026-02-17T20:34:41.356+0800","caller":"backend/main.go:62","msg":"Application starting","mode":"debug","port":":8080"}
{"level":"fatal","timestamp":"2026-02-17T20:34:41.375+0800","caller":"backend/main.go:70","msg":"Failed to initialize database","error":"failed to connect to database: dial tcp [::1]:3306: connectex: No connection could be made because the target machine actively refused it.","stacktrace":"main.main\n\tE:/WorkSpace/Personal/K-Admin/backend/main.go:70\nruntime.main\n\tC:/DevEnv/Go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2026-02-17T20:38:33.828+0800","caller":"backend/main.go:62","msg":"Application starting","mode":"debug","port":":8080"}
{"level":"fatal","timestamp":"2026-02-17T20:38:34.147+0800","caller":"backend/main.go:70","msg":"Failed to initialize database","error":"failed to connect to database: invalid connection","stacktrace":"main.main\n\tE:/WorkSpace/Personal/K-Admin/backend/main.go:70\nruntime.main\n\tC:/DevEnv/Go/src/runtime/proc.go:285"}
{"level":"info","timestamp":"2026-02-17T20:39:44.663+0800","caller":"backend/main.go:62","msg":"Application starting","mode":"debug","port":":8080"}
{"level":"info","timestamp":"2026-02-17T20:39:44.986+0800","caller":"core/gorm.go:58","msg":"Database connected successfully","host":"localhost","port":3306,"database":"k_admin","max_idle_conns":10,"max_open_conns":100}
{"level":"info","timestamp":"2026-02-17T20:39:45.294+0800","caller":"core/redis.go:28","msg":"Redis connection established","host":"localhost","port":6379,"db":0}
{"level":"info","timestamp":"2026-02-17T20:42:34.194+0800","caller":"backend/main.go:62","msg":"Application starting","mode":"debug","port":":8080"}
{"level":"info","timestamp":"2026-02-17T20:42:34.516+0800","caller":"core/gorm.go:58","msg":"Database connected successfully","host":"localhost","port":3306,"database":"k_admin","max_idle_conns":10,"max_open_conns":100}
{"level":"info","timestamp":"2026-02-17T20:42:34.823+0800","caller":"core/redis.go:28","msg":"Redis connection established","host":"localhost","port":6379,"db":0}
{"level":"info","timestamp":"2026-02-17T20:42:34.843+0800","caller":"core/casbin.go:40","msg":"Casbin enforcer initialized successfully"}
{"level":"info","timestamp":"2026-02-17T20:42:34.844+0800","caller":"core/migration.go:36","msg":"Starting database migration..."}
{"level":"error","timestamp":"2026-02-17T20:42:34.848+0800","caller":"core/gorm.go:137","msg":"Database query error","error":"Error 1824 (HY000): Failed to open the referenced table 'sys_roles'","elapsed":0.0005238,"sql":"CREATE TABLE `sys_users` (`id` bigint unsigned AUTO_INCREMENT,`created_at` datetime(3) NULL,`updated_at` datetime(3) NULL,`deleted_at` datetime(3) NULL,`username` varchar(50) NOT NULL,`password` varchar(255) NOT NULL,`nickname` varchar(50),`header_img` varchar(255),`phone` varchar(20),`email` varchar(100),`role_id` bigint unsigned NOT NULL,`active` boolean DEFAULT true,PRIMARY KEY (`id`),INDEX `idx_sys_users_deleted_at` (`deleted_at`),UNIQUE INDEX `idx_sys_users_username` (`username`),CONSTRAINT `fk_sys_roles_users` FOREIGN KEY (`role_id`) REFERENCES `sys_roles`(`id`))","rows":0,"stacktrace":"k-admin-system/core.(*gormLogger).Trace\n\tE:/WorkSpace/Personal/K-Admin/backend/core/gorm.go:137\ngorm.io/gorm.(*processor).Execute\n\tC:/Users/Kaede/go/pkg/mod/gorm.io/gorm@v1.31.1/callbacks.go:140\ngorm.io/gorm.(*DB).Exec\n\tC:/Users/Kaede/go/pkg/mod/gorm.io/gorm@v1.31.1/finisher_api.go:779\ngorm.io/gorm/migrator.Migrator.CreateTable.func1\n\tC:/Users/Kaede/go/pkg/mod/gorm.io/gorm@v1.31.1/migrator/migrator.go:309\ngorm.io/gorm/migrator.Migrator.RunWithValue\n\tC:/Users/Kaede/go/pkg/mod/gorm.io/gorm@v1.31.1/migrator/migrator.go:74\ngorm.io/gorm/migrator.Migrator.CreateTable\n\tC:/Users/Kaede/go/pkg/mod/gorm.io/gorm@v1.31.1/migrator/migrator.go:218\ngorm.io/gorm/migrator.Migrator.AutoMigrate\n\tC:/Users/Kaede/go/pkg/mod/gorm.io/gorm@v1.31.1/migrator/migrator.go:125\ngorm.io/gorm.(*DB).AutoMigrate\n\tC:/Users/Kaede/go/pkg/mod/gorm.io/gorm@v1.31.1/migrator.go:24\nk-admin-system/core.RegisterTables\n\tE:/WorkSpace/Personal/K-Admin/backend/core/migration.go:14\nk-admin-system/core.AutoMigrate\n\tE:/WorkSpace/Personal/K-Admin/backend/core/migration.go:38\nmain.main\n\tE:/WorkSpace/Personal/K-Admin/backend/main.go:89\nruntime.main\n\tC:/DevEnv/Go/src/runtime/proc.go:285"}
{"level":"error","timestamp":"2026-02-17T20:42:34.848+0800","caller":"core/migration.go:21","msg":"Failed to migrate tables","error":"Error 1824 (HY000): Failed to open the referenced table 'sys_roles'","stacktrace":"k-admin-system/core.RegisterTables\n\tE:/WorkSpace/Personal/K-Admin/backend/core/migration.go:21\nk-admin-system/core.AutoMigrate\n\tE:/WorkSpace/Personal/K-Admin/backend/core/migration.go:38\nmain.main\n\tE:/WorkSpace/Personal/K-Admin/backend/main.go:89\nruntime.main\n\tC:/DevEnv/Go/src/runtime/proc.go:285"}
{"level":"error","timestamp":"2026-02-17T20:42:34.848+0800","caller":"core/migration.go:40","msg":"Database migration failed","error":"Error 1824 (HY000): Failed to open the referenced table 'sys_roles'","stacktrace":"k-admin-system/core.AutoMigrate\n\tE:/WorkSpace/Personal/K-Admin/backend/core/migration.go:40\nmain.main\n\tE:/WorkSpace/Personal/K-Admin/backend/main.go:89\nruntime.main\n\tC:/DevEnv/Go/src/runtime/proc.go:285"}
{"level":"fatal","timestamp":"2026-02-17T20:42:34.848+0800","caller":"backend/main.go:90","msg":"Failed to run database migrations","error":"Error 1824 (HY000): Failed to open the referenced table 'sys_roles'","stacktrace":"main.main\n\tE:/WorkSpace/Personal/K-Admin/backend/main.go:90\nruntime.main\n\tC:/DevEnv/Go/src/runtime/proc.go:285"}
